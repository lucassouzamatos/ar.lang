pub fun get_port (value) ->
  match value with
    ({ ~a ok port }) -> port done
    (_) -> 1 done
  done
done

pub fun listen () ->
  let b = ~a binary
  let options = [b]
  let listening = apply ~gen_tcp.listen 4444 options done
  
  let ttt = apply get_port listening done
  apply ~erlang.display ttt done
done

pub fun start () ->
  apply listen done
done